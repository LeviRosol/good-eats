{% comment %}
Auto gallery (6 slots): renders as 2 rows x 3 columns on desktop/tablet,
and 1 column on small screens. Images are expected at:
  images/1.(jpg|jpeg|png|webp) ... images/6.(...)
Missing images auto-remove via onerror (no broken icons).
Usage in a recipe page:
  - front matter: gallery: auto
  - include: {% include recipe-gallery.html %}
{% endcomment %}

{% if page.gallery == "auto" or page.gallery == true %}
  {% assign base = page.url | remove: 'index/' | append: 'images/' %}
  {% assign exts = "jpg" | split: "," %}

<h2>Gallery</h2>
  <div class="gallery-grid gallery-2x3">
    {%- for i in (1..6) -%}
      <div class="gallery-cell">
        {%- assign shown = false -%}
        {%- for ext in exts -%}
          {%- assign src = base | append: i | append: "." | append: ext -%}
          <img class="gallery-img"
               src="{{ src | relative_url }}"
               alt="{{ page.title }} image {{ i }}"
               loading="lazy"
               onerror="this.closest('.gallery-cell').remove();">
        {%- endfor -%}
      </div>
    {%- endfor -%}
  </div>
{% endif %}
